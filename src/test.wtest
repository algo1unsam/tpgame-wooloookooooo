import bloques.*
import crearCosas.*
import balas.*
import tanques.*
import wollok.game.*
import movimientos.*
import tanques.*

describe "bloques" {
	
	const ladrillo = new Ladrillo()
	const acero = new Acero()
	const agua = new Agua()
	const arbusto = new Arbusto()
	const tanqueEnemigo = new TankEnemigo()
	const bala = new Bala(quienDisparo = tank, sentido = up, position = game.at(10,10))

	
	
	method initialize() {
		creadorDeCosas.crear(ladrillo,0,1)
		creadorDeCosas.crear(acero,1,1)
		creadorDeCosas.crear(agua,2,1)
		creadorDeCosas.crear(arbusto,3,1)
		
		game.addVisual(tank)
		
		tank.disparo()
		bala.disparar()
	
	}
//LADRILLO	
	test "LADRILLO se rompe al recibir disparo del jugador" {
		ladrillo.fueImpactado(bala)
		assert.that(ladrillo.seRompe())	
	}
	
	test "LADRILLO se rompe al recibir disparo enemigo" {
		ladrillo.fueImpactado(bala)
		assert.that(ladrillo.seRompe())
	}

	test "BALA del jugador NO atraviesa el LADRILLO" {
		ladrillo.fueImpactado(bala)
		assert.notThat(ladrillo.dejaPasarBala())
	}
	
	test "BALA enemiga NO atraviesa el LADRILLO" {
		ladrillo.fueImpactado(bala) 
		assert.notThat(ladrillo.dejaPasarBala())
	}
		
	/*
	test "LADRILLO NO deja pasar TANQUE" {
		//Agregar cambio posicion del tanque
	}
	*/
	
	test "TANQUE puede pasar al romperse el LADRILLO" {
		ladrillo.fueImpactado(bala)
		assert.that(ladrillo.seRompe())	
		//Agregar cambio posicion del tanque	
	}
	
//ACERO	
	test "ACERO NO se rompe al recibir disparo" {
		acero.fueImpactado(bala)
		assert.notThat(acero.seRompe())
		 
		acero.fueImpactado(bala)
		assert.notThat(acero.seRompe())
	}
	
	test "BALAS NO atraviesan el ACERO" {
		acero.fueImpactado(bala)
		assert.notThat(acero.dejaPasarBala())
		
		acero.fueImpactado(bala)
		assert.notThat(acero.dejaPasarBala())
	}
	
	/*
	test "TANQUE NO puede pasar el ACERO aunque reciba disparo" {
		ladrillo.fueImpactado(bala)
		//Agregar cambio posicion del tanque	
	}
	*/
	

//AGUA	
	test "AGUA NO se rompe al recibir disparos" {
		agua.fueImpactado(bala)
		assert.notThat(agua.seRompe())
		
		agua.fueImpactado(bala)
		assert.notThat(agua.seRompe()) 
	}

	test "BALAS atraviesan el AGUA" {
		agua.fueImpactado(bala)
		assert.that(agua.dejaPasarBala())
		
		agua.fueImpactado(bala)
		assert.that(agua.dejaPasarBala())
	}
	
	/*
	test "TANQUES NO atraviesan el AGUA" {
		//tank.mover()
		assert.notThat(agua.dejaPasarTank())
	}
	*/

//ARBUSTO	
	test "ARBUSTO NO se rompe al recibir disparos" {
		arbusto.fueImpactado(bala)
		assert.notThat(arbusto.seRompe())
		
		arbusto.fueImpactado(bala)
		assert.notThat(arbusto.seRompe()) 
	}
	
	test "BALAS atraviesan el ARBUSTO" {
		arbusto.fueImpactado(bala)
		assert.that(arbusto.dejaPasarBala())
		
		arbusto.fueImpactado(bala)
		assert.that(arbusto.dejaPasarBala())
	}
	
	
	test "TANQUES atraviesan el ARBUSTO" {
		//tank.position(0,0)
		tank.mover(up)
		assert.that(arbusto.dejaPasarTank())
	}
	
	
//AGUILA
	
//SCORE
	test "SCORE aumenta cuando se matan enemigos" {
		//tank.aumentarKill()
		tanqueEnemigo.fueImpactado(bala) //no funciona porque tanque enemigo no tiene el tick event ya q no fue creado
										//como lo crea el juego.
		assert.equals(100, tank.scoreAsesinados())
	}
}